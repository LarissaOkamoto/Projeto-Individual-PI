<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="Dashboard.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Elms+Sans:ital,wght@0,100..900;1,100..900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body onload="obterDados()">

<div class="body_dashboard">
    <div class="barra_lateral">
        <ul class="navbar">
        <div class="navbar_topo">
        <img src="Imagens\img-logo3.png" class="img-logo">
        <div class="login">
            <img src="" class="img-login">
            <p>Bem vindo(a)!</p>
        </div>
        <br/>
        <li>
            <a href="Dashboard.html" class="button_dashboard">Dashboard</a>
        </li>
        <br/>
        <li>
            <a href="Atividades.html" class="button_atividades">Atividades</a>
        </li>
        <br/>
        <br/>
        <li>
            <div class="button_sair" onclick="window.location.href='./Index.html';">
            <img src="Imagens\img-exit.png" class="img-exit">
            <a href="./Index.html" class="Login">Saír</a>
            </div>
        </li>
        </div>
        <div class="contatos">
            <b>Contatos</b>
            <br/>
            <br/>
            <img src="Imagens\img-telefone.png" class="img-telefone">
            +55 11 3000-0000
            <br/>
            <img src="Imagens\img-email.png" class="img-email">
            umui@outlook.com
            <br/>
            <img src="Imagens\img-instagram.png" class="img-instagram">
            @Umui.Project
        </div>
        </ul>
    </div>

    <div class="dashboard">
        <img src="Imagens\img-header_dashboard.png" class="img-header_dashboard">
        <div class="explicacao">
            <h2>Olá, vamos começar a construir uma memória especial?</h2>
            Este é um espaço para eternizar histórias, homenagens e lembranças.
        </div>
        <br/>
        <hr class="divider">
        <div class="inicie_projeto">

            <div class="continuar_projeto">
            <h3>Continuar o projeto</h3>
            <div class="body_atividades">
            <div class="atividades_1a3">
            <li>
                <div class="button_atividade_individual" onclick="window.location.href='Atividades.html';">
                <img src="Imagens\img-atividade1.png" class="img-atividade1">
                <a href="Atividades.html" class="button_atividades">Atividade 1</a>
                </div>
            </li>
            <li>
                <div class="button_atividade_individual" onclick="window.location.href='Atividades.html';">
                <img src="Imagens\img-atividade2.png" class="img-atividade2">
                <a href="Atividades.html" class="button_atividades">Atividade 2</a>
                </div>
            </li>
            <li>
                <div class="button_atividade_individual" onclick="window.location.href='Atividades.html';">
                <img src="Imagens\img-atividade3.png" class="img-atividade3">
                <a href="Atividades.html" class="button_atividades">Atividade 3</a>
                </div>
            </li>
            </div>
            <div class="atividades_4a6">
            <li>
                <div class="button_atividade_individual" onclick="window.location.href='Atividades.html';">
                <img src="Imagens\img-atividade4.png" class="img-atividade4">
                <a href="Atividades.html" class="button_atividades">Atividade 4</a>
                </div>
            </li>
            <li>
                <div class="button_atividade_individual" onclick="window.location.href='Atividades.html';">
                <img src="Imagens\img-atividade5.png" class="img-atividade5">
                <a href="Atividades.html" class="button_atividades">Atividade 5</a>
                </div>
            </li>
            <li>
                <div class="button_atividade_individual" onclick="window.location.href='Atividades.html';">
                <img src="Imagens\img-atividade6.png" class="img-atividade6">
                <a href="Atividades.html" class="button_atividades">Atividade 6</a>
                </div>
            </li>
            </div>
            </div>
            </div>

            <div class="novo_projeto">
                <h3>Iniciar um novo projeto</h3>
                Monte um novo projeto para uma pessoa especial!
                <br/>
                <br/>
                <img src="Imagens\img-album6.png" class="img-novo_projeto">
                <br/>
                <br/>
                <li>
                <a href="" class="button_novo_projeto">Inicie o seu novo projeto!</a>
                </li>
            </div>

        </div>
        <hr class="divider">
        <div class="dados_andamento">
            <h2>Acompanhe o seu projeto ...</h2>
            <div class="andamento">
                <img src="Imagens\img-album.png" class="img-album">
                <div class="metricas_grafico">
                <div class="metricas">
                    <div class="kpi_andamento">
                    <h3>Porcentagem de conclusão total do projeto</h3>
                    <br/>
                    <div id="div_mensagem" class ="texto_porcentagem"></div>
                    <br/>
                    Uma história se concretizando ...
                    <br/>
                    
                    </div>
                </div>
                <div class="grafico">
                    Porcentagem de progresso %
                    <div class="grafico1_2">
                    <canvas id="barra1" class="grafico1" width="350px" height="350px"></canvas>
                    <canvas id="barra2" class="grafico2" width="300px" height="300px"></canvas>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </div>
</div>
    
</body>
</html>

<script>
    var porcentagemTotal = 0;

    function obterDados(){
    /*fetch('/obterDados')
    .then(function(response){
    return response.json();
    })
    .then(function(data){
    plotarGraficoBarra(data);
    })
    .catch(function(err){
    console.log(err);
    })*/


    var dados = [{
    Atividade:'Linha da Vida',
    Andamento: 1
  },
  {
    Atividade:'Depoimentos',
    Andamento: 1
  },
  {
    Atividade:'A história em objetos',
    Andamento: 0
  },
  {
    Atividade:'A origem',
    Andamento: 1
  },
  {
    Atividade:'Família & amigos',
    Andamento: 0
  },
  {
    Atividade:'O legado',
    Andamento: 1
  }]

  
  var soma = Number(dados[0].Andamento) + Number(dados[1].Andamento) + Number(dados[2].Andamento) + Number(dados[3].Andamento) + Number(dados[4].Andamento) + Number(dados[5].Andamento);
  var porcentagem = (soma / dados.length) * 100

    div_mensagem.innerHTML = `${Number(porcentagem).toFixed(0)}%`;

    porcentagemTotal = porcentagem;

      plotarGraficoBarra(dados)
}


function plotarGraficoBarra(dados){

  var Atividade = [];
  var Andamento = [];
  var Atividades = [`Conclusão do Projeto final`];

  // Preenchendo os arrays com os dados
  for(var i = 0; i < dados.length; i++){
    Atividade.push(dados[i].Atividade);
    Andamento.push(dados[i].Andamento);
  }


  var ctx = document.getElementById('barra1').getContext('2d');
  // Criando o gráfico de barra usando o Chart.js
  var myChart = new Chart(ctx, {
      type: 'bar', // Tipo de gráfico: barra
      data: { // Dados para o gráfico
          labels: Atividade, // Rótulos no eixo X
          datasets: [{
              label: 'Atividades Completas', // Nome do conjunto de dados
              data: Andamento, // Dados dos votos
              backgroundColor: [
                  'rgba(185, 149, 115, 0.2)', // Cor de fundo das barras
              ],
              borderColor: [
                  'rgba(185, 149, 115, 1)', // Cor da borda das barras
              ],
              borderWidth: 1 // Largura da borda das barras
          }]
      },
  });

  var ctx = document.getElementById('barra2').getContext('2d');
  // Criando o gráfico de barra usando o Chart.js
  
  porcentagemTotal
  var myChart = new Chart(ctx, {
      type: 'bar', // Tipo de gráfico: barra
      data: { // Dados para o gráfico
          labels: Atividades, // Rótulos no eixo X
          datasets: [{
              label: 'Porcentagem concluída', // Nome do conjunto de dados
              data: [porcentagemTotal], // Dados dos votos
              backgroundColor: [
                  'rgba(134, 171, 82, 0.2)', // Cor de fundo das barras
              ],
              borderColor: [
                  'rgba(134, 171, 82, 1)', // Cor da borda das barras
              ],
              borderWidth: 1 // Largura da borda das barras
          }]
      },
      options: {
        scales: {
            y: {
                beginAtZero: true,
                max: 100
            }
        }
    }
  });
}

    
</script>